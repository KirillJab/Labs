//---------------------------------------------------------------------------

#pragma hdrstop

#include "CRect.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)

CRect::CRect(int x1, int y1, int x2, int y2, System::Uitypes::TColor color)
{
	this->x1 = x1;
	this->y1 = y1;
	this->x2 = x2;
	this->y2 = y2;
	this->color = color;
}

void CRect::hide (TCanvas* Canvas)
{
	Canvas->Pen->Color = clWhite;
	Canvas->Brush->Color = clWhite;
	Canvas->Rectangle(x1, y1, x2, y2);
}

void CRect::show (TCanvas* Canvas)
{
	Canvas->Pen->Color = clBlack;
	Canvas->Brush->Color = color;
	Canvas->Rectangle(x1, y1, x2, y2);
	Canvas->Ellipse(x1, y2 - 10, x1, y2 + 10);
	Canvas->Ellipse(x2, y2 - 10, x2, y2 + 10);
}

void CRect::moveto (TCanvas* Canvas, int a, int b, int c, int d)
{
	if(x1 + a > 0)
	{
		x1 += a;
	}
	else
	{
		x1 = 0;
		x2 -= c;
	}
	if(y1 + b > 0)
	{
		y1 += b;
	}
	else
	{
		y1 = 0;
		y2 -= d;
	}
	if(x2 + c < 900)
	{
		x2 += c;
	}
	else
	{
		x2 = 900;
		x1 -= a;
	}
	if(y2 + d < 500)
	{
		y2+=d;
	}
	else
	{
		y2=500;
		y1 -= b;
	}
}

void CRect::move (TCanvas* Canvas, int a, int b, int c, int d)
{
	this->hide(Canvas);
	this->moveto(Canvas, a, b, c, d);
	this->show(Canvas);
}

